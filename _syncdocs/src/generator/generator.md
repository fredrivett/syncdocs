---
title: Generator
generated: 2026-02-03T11:06:24.334Z
dependencies:
  - path: /Users/fredrivett/code/FR/syncdocs/src/generator/index.ts
    symbol: Generator
    hash: 87c5819f181b9be8cf3d5c58f916cb907990b08e99c0286e598def9f3b04082f
---
# Generator

The `Generator` class is the primary orchestrator for automated documentation generation from TypeScript source code. It combines type extraction, AI-powered content generation, and file management to create structured documentation with dependency tracking and frontmatter metadata.

## Overview

This class coordinates the documentation generation pipeline by:
- Extracting TypeScript symbols using `TypeScriptExtractor`
- Generating content hashes for change detection via `ContentHasher`
- Leveraging AI through `AIClient` for documentation content creation
- Managing file output with YAML frontmatter containing dependency metadata

## Constructor

### `constructor(config: GeneratorConfig)`

Creates a new Generator instance with the specified configuration.

**Parameters:**
- `config: GeneratorConfig` - Configuration object containing:
  - `apiKey: string` - API key for the AI client
  - `model: string` - AI model identifier to use
  - `outputDir: string` - Directory path for generated documentation
  - `style: string` - Documentation style preference

## Public Methods

### `generate(request: GenerateRequest): Promise<GenerationResult>`

Generates documentation for a single symbol.

**Parameters:**
- `request: GenerateRequest` - Request object containing:
  - `symbol: SymbolInfo` - The TypeScript symbol to document
  - `context?: GenerationContext` - Optional context including project info and related symbols
  - `customPrompt?: string` - Optional custom prompt for AI generation

**Returns:**
- `Promise<GenerationResult>` - Result object with either:
  - Success: `{ success: true, filePath: string }`
  - Failure: `{ success: false, error: string }`

**Example:**
```typescript
const generator = new Generator({
  apiKey: 'your-api-key',
  model: 'gpt-4',
  outputDir: './docs',
  style: 'technical'
});

const result = await generator.generate({
  symbol: extractedSymbol,
  context: {
    projectContext: 'Web application using React and TypeScript',
    relatedSymbols: [relatedClass, relatedInterface]
  }
});

if (result.success) {
  console.log(`Documentation written to: ${result.filePath}`);
}
```

### `generateForFile(filePath: string): Promise<GenerationResult[]>`

Generates documentation for all exported symbols found in a TypeScript file.

**Parameters:**
- `filePath: string` - Absolute path to the TypeScript source file

**Returns:**
- `Promise<GenerationResult[]>` - Array of generation results, one per symbol found

**Example:**
```typescript
const results = await generator.generateForFile('/path/to/MyClass.ts');

for (const result of results) {
  if (result.success) {
    console.log(`Generated: ${result.filePath}`);
  } else {
    console.error(`Failed: ${result.error}`);
  }
}
```

## Private Methods

### `generateDoc(request: GenerateRequest): Promise<GeneratedDoc>`

Core documentation generation logic that orchestrates AI content creation, dependency tracking, and file path generation.

### `writeDoc(doc: GeneratedDoc): void`

Writes the generated documentation to the filesystem with YAML frontmatter, creating directories as needed.

### `generateFrontmatter(doc: GeneratedDoc): string`

Creates YAML frontmatter containing metadata including title, generation timestamp, and dependency information with content hashes.

### `generateFilePath(symbol: SymbolInfo, fileName: string): string`

Constructs the output file path by preserving the source directory structure within the configured output directory.

### `generateFileName(symbol: SymbolInfo): string`

Converts symbol names to kebab-case markdown filenames (e.g., `MyClass` â†’ `my-class.md`).

### `extractTitle(content: string): string | null`

Extracts the title from generated markdown content by finding the first H1 heading (`# Title`).

### `getGitCommit(): Promise<string | undefined>`

Attempts to retrieve the current Git commit hash for version tracking. Returns `undefined` if not in a Git repository or if Git is unavailable.

## Dependencies

The Generator class requires and instantiates:
- `TypeScriptExtractor` - For parsing TypeScript source code and extracting symbol information
- `ContentHasher` - For generating content hashes to detect changes
- `AIClient` - For generating documentation content using AI models

## File Output Structure

Generated files include:
- **YAML frontmatter** with title, generation timestamp, and dependency tracking
- **Markdown content** generated by the AI client
- **Directory structure** that mirrors the source code organization
- **Naming convention** using kebab-case for filenames

## Error Handling

All public methods use comprehensive error handling:
- Exceptions are caught and returned as failed `GenerationResult` objects
- File system operations include directory creation
- Git operations gracefully handle non-Git environments

## Important Notes

- The class preserves source directory structure in the output documentation
- Content hashing enables incremental regeneration by detecting changed dependencies  
- YAML frontmatter allows documentation tools to track metadata and dependencies
- File operations are synchronous after content generation completes
- Symbol extraction failures return descriptive error messages rather than throwing exceptions